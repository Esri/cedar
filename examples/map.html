<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="not-ie"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  
    <title>Map | Esri Cedar</title>
  

  

  <meta name="description" content="Esri Cedar">
  <meta name="viewport" content="width=device-width">

  <!--[if lt IE 9]>
    <script src="//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv-printshiv.js"></script>
  <![endif]-->

  <!-- stylesheet -->
  <link rel="stylesheet" href="../../../cedar/css/style.css">
  <link rel="stylesheet" href="../../../cedar/css/calcite-bootstrap.css">

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

  <!-- Cedar and dependencies (d3, vega) -->
  <!-- NOTE: the pie chart examle does not work w/ latest vega (v1.5+), so here we are pulling in an oldder version (v1.4.3) -->
  
    <script type="text/javascript" src="../../../cedar/js/d3.min.js"></script>
    <script type="text/javascript" src="../../../cedar/js/vega.min.js"></script>
    <script type="text/javascript" src="../../../cedar/js/cedar.js"></script>
  
  <!-- NOTE: underscore is used by a few examples, but is not needed by Cedar -->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>

  <!-- NOTE: prism is used by the examples, but is not needed by Cedar -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.css">
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>

  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47337822-8', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
</head>
<body>

  <nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../cedar/">cedar.js</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        <li><a href="../../../cedar/tutorial/">Tutorial</a></li>
        <li><a href="../../../cedar/examples/">Examples</a></li>
        <li><a href="../../../cedar/api/">API</a></li>
        <li><a href="https://github.com/esri/cedar">Github</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  

<div class="container white">
  

<div class="row">

	<div class="col-lg-3">
	  <aside class="sidebar">


  <h5 class="page-header">Chart Types</h5>
  <nav>
    <ul>
      <li><a href="../../../cedar/examples/bar.html">Bar Chart</a></li>
      <li><a href="../../../cedar/examples/horizontal.html">Horizontal Chart</a></li>
      <li><a href="../../../cedar/examples/grouped.html">Grouped Bar Chart</a></li>
      <li><a href="../../../cedar/examples/scatter-def-url.html">Scatterplot</a></li>
      <li><a href="../../../cedar/examples/bubble.html">Bubble Scatterplot</a></li>
      <li><a href="../../../cedar/examples/simple-pie.html">Pie Chart</a></li>
      <li><a href="../../../cedar/examples/multiple.html">Multiple Charts</a></li>
      <li><a href="../../../cedar/examples/sparkline.html">Sparkline</a></li>
      <li><a href="../../../cedar/examples/time.html">Timeline</a></li>
      <li><a href="../../../cedar/examples/time-aggregation.html">Time Aggregation</a></li>
      <!--li><a href="../../../cedar/examples/time-dots.html">Time facets</a></li-->
      <li><a href="../../../cedar/examples/time-trendline.html">Time with Trendline</a></li>
      <li><a href="../../../cedar/examples/map.html">Map Chart</a></li>
    </ul>
  </nav>

  <h5>Events</h5>
  <nav>
    <ul>
      <li><a href="../../../cedar/examples/dynamic.html">Dynamic Data</a></li>
      <li><a href="../../../cedar/examples/scatter-events.html">Scatter Plot Events</a></li>
      <li><a href="../../../cedar/examples/drill-down.html">Drill Down</a></li>
      <li><a href="../../../cedar/examples/events.html">Setting Events</a></li>
    </ul>
  </nav>
  <h5>Map Integration</h5>
  <nav>
    <ul>
      <li><a href="../../../cedar/examples/map-to-chart-interaction.html">Map Interaction</a></li>
      <li><a href="../../../cedar/examples/bar-map-leaflet-integration.html">With Leaflet Map</a></li>
      <li><a href="../../../cedar/examples/filter-chart-by-map-extent.html">Filter by Geometry</a></li>
      <li><a href="../../../cedar/examples/filter-chart-by-bbox.html">Filter by Extent</a></li>
    </ul>
  </nav>

  <h5>Additional Examples</h5>
  <nav>
    <ul>
      <li><a href="../../../cedar/examples/errorbars.html">Error bars</a></li>
      <li><a href="../../../cedar/examples/complex-map-multiple-chart.html">Map and Multiple Charts</a></li>
      <li><a href="../../../cedar/examples/inlined-data.html">Local Inline Data</a></li>
      <li><a href="../../../cedar/examples/sizes.html">Chart Size and Resizing</a></li>
      <li><a href="../../../cedar/examples/responsive-example.html">Responsive Charts</a></li>
      <li><a href="../../../cedar/examples/transform.html">Transform Query Results</a></li>
    </ul>
  </nav>

  <h5>Using Specifications</h5>
  <nav>
    <ul>
      <!--li><a href="../../../cedar/examples/spec-url.html">Specification URL</a></li-->
      <li><a href="../../../cedar/examples/spec-inlined.html">Inline Specification</a></li>
      <li><a href="../../../cedar/examples/vega.html">Vega Specification</a></li>
      <li><a href="../../../cedar/examples/spec-defaults.html">Defaults</a></li>
      <li><a href="../../../cedar/examples/style-overrides.html">Style Overrides</a></li>
    </ul>
  </nav>

<!--  <h5>Using Definitions</h5>
  <nav>
    <ul>
      <li><a href="../../../cedar/examples/scatter-def-url.html">Load from URL</a></li>
      <li>In-lined</li>
    </ul>
  </nav>
  -->
</aside>

	</div>
	<div class="col-lg-9">
   	  <h2 class="page-header">Map</h2>
	  


<h2>Map Example<small></small></h2>

<h3>Possible Vegetation %</h3>
<div id="chart" style="height: 100%"></div>

<script>
  //create the specification
  var spec ={
  	  "inputs": [
	    {"name":"value","type":["numeric"], "required":true}
  	  ],
	  "template":{
		  "data": [
	        {
		        "name": "table",
		        "format": {"property": "features"}
		    },
		    {
		      "name": "area",
		      "url": "http://opendata.dc.gov/datasets/4919ca2fa0894de18e4752a5e16ca683_22.geojson",
		      "format": {"type": "json","property": "features"},
		      "transform": [
		        {
		          "type": "geopath",
		          "value": "data",
		          "projection": "mercator",
		          "scale": 100000,
		          "center": [-77.03687, 38.90719],
		            "translate": [0, 0]
		        }
		      ]
		    }
		  ],
		  "legends": [
		    {"fill": "color", "title": "Vegetation", "offset": -600, "values": [0,0.2, 0.4, 0.6, 0.8, 1.0]}
		  ],
	      "scales": [
		    {
		      "name": "color",
		      "type": "quantize",
		      "domain": {"data": "area", "field": "properties.{value.field}"},
		      "range": ["#f7fbff", "#deebf7", "#c6dbef", "#9ecae1", "#6baed6",
		                "#4292c6", "#2171b5", "#08519c", "#08306b"]
		    }],
		  "marks": [
		    {
		      "type": "path",
		      "from": {"data": "area"},
		      "properties": {
		        "enter": {
		                  "fill": {"value": "#dedede"},
		                  "stroke": {"value": "white"},
		                  "path": {"field": "layout_path"}
		                },
		                "update": { "fill": {"scale": "color", "field": "properties.{value.field}"} },

		                "hover": {
		                  "fill": {"value": "red"}
		                }
		      }
		    }
		  ]
		}
  	};
  var chart = new Cedar({"specification":spec});
  var dataset = {
  	// placeholder until Cedar can just accept GeoJSON
    "url":"https://services.arcgis.com/bkrWlSKcjUDFDtgw/arcgis/rest/services/It's_a_Tornado_Map/FeatureServer/0",
    "mappings":{
        "value": {"field":"DCGISUTC_WardUTC_PV_P", "label": "Possible Vegetation %"}
    }
  };
  chart.tooltip = {
    "title": "Hi",
    "content": "World"
  };
  chart.dataset = dataset;
  //chart.dataset.mappings.sort = "DATE";
  chart.show({
    elementId: "#chart",
    renderer: "svg"
  });

</script>


<h2>Code</h2>
<pre><code class="language-javascript">&lt;h3&gt;Possible Vegetation %<span class="xml"><span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"chart"</span> <span class="attribute">style</span>=<span class="value">"height: 100%"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
  <span class="comment">//create the specification</span>
  <span class="keyword">var</span> spec ={
        <span class="string">"inputs"</span>: [
        {<span class="string">"name"</span>:<span class="string">"value"</span>,<span class="string">"type"</span>:[<span class="string">"numeric"</span>], <span class="string">"required"</span>:<span class="literal">true</span>}
        ],
      <span class="string">"template"</span>:{
          <span class="string">"data"</span>: [
            {
                <span class="string">"name"</span>: <span class="string">"table"</span>,
                <span class="string">"format"</span>: {<span class="string">"property"</span>: <span class="string">"features"</span>}
            },
            {
              <span class="string">"name"</span>: <span class="string">"area"</span>,
              <span class="string">"url"</span>: <span class="string">"http://opendata.dc.gov/datasets/4919ca2fa0894de18e4752a5e16ca683_22.geojson"</span>,
              <span class="string">"format"</span>: {<span class="string">"type"</span>: <span class="string">"json"</span>,<span class="string">"property"</span>: <span class="string">"features"</span>},
              <span class="string">"transform"</span>: [
                {
                  <span class="string">"type"</span>: <span class="string">"geopath"</span>,
                  <span class="string">"value"</span>: <span class="string">"data"</span>,
                  <span class="string">"projection"</span>: <span class="string">"mercator"</span>,
                  <span class="string">"scale"</span>: <span class="number">100000</span>,
                  <span class="string">"center"</span>: [-<span class="number">77.03687</span>, <span class="number">38.90719</span>],
                    <span class="string">"translate"</span>: [<span class="number">0</span>, <span class="number">0</span>]
                }
              ]
            }
          ],
          <span class="string">"legends"</span>: [
            {<span class="string">"fill"</span>: <span class="string">"color"</span>, <span class="string">"title"</span>: <span class="string">"Vegetation"</span>, <span class="string">"offset"</span>: -<span class="number">600</span>, <span class="string">"values"</span>: [<span class="number">0</span>,<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1.0</span>]}
          ],
          <span class="string">"scales"</span>: [
            {
              <span class="string">"name"</span>: <span class="string">"color"</span>,
              <span class="string">"type"</span>: <span class="string">"quantize"</span>,
              <span class="string">"domain"</span>: {<span class="string">"data"</span>: <span class="string">"area"</span>, <span class="string">"field"</span>: <span class="string">"properties.{value.field}"</span>},
              <span class="string">"range"</span>: [<span class="string">"#f7fbff"</span>, <span class="string">"#deebf7"</span>, <span class="string">"#c6dbef"</span>, <span class="string">"#9ecae1"</span>, <span class="string">"#6baed6"</span>,
                        <span class="string">"#4292c6"</span>, <span class="string">"#2171b5"</span>, <span class="string">"#08519c"</span>, <span class="string">"#08306b"</span>]
            }],
          <span class="string">"marks"</span>: [
            {
              <span class="string">"type"</span>: <span class="string">"path"</span>,
              <span class="string">"from"</span>: {<span class="string">"data"</span>: <span class="string">"area"</span>},
              <span class="string">"properties"</span>: {
                <span class="string">"enter"</span>: {
                          <span class="string">"fill"</span>: {<span class="string">"value"</span>: <span class="string">"#dedede"</span>},
                          <span class="string">"stroke"</span>: {<span class="string">"value"</span>: <span class="string">"white"</span>},
                          <span class="string">"path"</span>: {<span class="string">"field"</span>: <span class="string">"layout_path"</span>}
                        },
                        <span class="string">"update"</span>: { <span class="string">"fill"</span>: {<span class="string">"scale"</span>: <span class="string">"color"</span>, <span class="string">"field"</span>: <span class="string">"properties.{value.field}"</span>} },

                        <span class="string">"hover"</span>: {
                          <span class="string">"fill"</span>: {<span class="string">"value"</span>: <span class="string">"red"</span>}
                        }
              }
            }
          ]
        }
      };
  <span class="keyword">var</span> chart = <span class="keyword">new</span> Cedar({<span class="string">"specification"</span>:spec});
  <span class="keyword">var</span> dataset = {
      <span class="comment">// placeholder until Cedar can just accept GeoJSON</span>
    <span class="string">"url"</span>:<span class="string">"https://services.arcgis.com/bkrWlSKcjUDFDtgw/arcgis/rest/services/It's_a_Tornado_Map/FeatureServer/0"</span>,
    <span class="string">"mappings"</span>:{
        <span class="string">"value"</span>: {<span class="string">"field"</span>:<span class="string">"DCGISUTC_WardUTC_PV_P"</span>, <span class="string">"label"</span>: <span class="string">"Possible Vegetation %"</span>}
    }
  };
  chart.tooltip = {
    <span class="string">"title"</span>: <span class="string">"Hi"</span>,
    <span class="string">"content"</span>: <span class="string">"World"</span>
  };
  chart.dataset = dataset;
  <span class="comment">//chart.dataset.mappings.sort = "DATE";</span>
  chart.show({
    elementId: <span class="string">"#chart"</span>,
    renderer: <span class="string">"svg"</span>
  });

</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span></code></pre>

	  <div class="wrap">
	    <p><a href="https://github.com/esri/cedar/edit/master/site/source/pages/examples/map.hbs">Edit this page on GitHub</a></p>
	  </div>
	</div>

</div>

</div>


  <hr>
  <div class="container centered-text">
  <p class="copyright">Cedar is a project from the <a href="http://dc.esri.com">Esri DC R&amp;D Center</a> </p>
</div>

  <!-- <script src="../../../cedar/js/script.js"></script>-->
  </body>
</html>